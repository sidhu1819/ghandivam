import { BSON_MAJOR_VERSION } from './constants';
import { type InspectFn } from './parser/utils';
import { BSON_VERSION_SYMBOL } from './constants';

/** @public */
<<<<<<< HEAD
export abstract class BSONValue {
  /** @public */
  public abstract get _bsontype(): string;
=======
<<<<<<< HEAD
export abstract class BSONValue {
  /** @public */
  public abstract get _bsontype(): string;
=======
<<<<<<< HEAD
export abstract class BSONValue {
  /** @public */
  public abstract get _bsontype(): string;
=======
<<<<<<< HEAD
export abstract class BSONValue {
  /** @public */
  public abstract get _bsontype(): string;
=======
export type BSONTypeTag =
  | 'BSONRegExp'
  | 'BSONSymbol'
  | 'ObjectId'
  | 'Binary'
  | 'Decimal128'
  | 'Double'
  | 'Int32'
  | 'Long'
  | 'MaxKey'
  | 'MinKey'
  | 'Timestamp'
  | 'Code'
  | 'DBRef';

/** @public */
export const bsonType = Symbol.for('@@mdb.bson.type');

/** @public */
export abstract class BSONValue {
  /** @public */
  public abstract get _bsontype(): BSONTypeTag;

  public get [bsonType](): this['_bsontype'] {
    return this._bsontype;
  }
>>>>>>> 15bede01c7ffb65f0f85a5665d68bbebfb4c56e4
>>>>>>> 42b8c68a6b3e3ceb41f68f225e722ab4df25a304
>>>>>>> 41cbcef940efb197ef1c00de637fe545aa8e93ea
>>>>>>> 3d8de14eeb27d6b293c8027db75b8cf0eb66facd

  /** @internal */
  get [BSON_VERSION_SYMBOL](): typeof BSON_MAJOR_VERSION {
    return BSON_MAJOR_VERSION;
  }

  [Symbol.for('nodejs.util.inspect.custom')](
    depth?: number,
    options?: unknown,
    inspect?: InspectFn
  ): string {
    return this.inspect(depth, options, inspect);
  }

  /**
   * @public
   * Prints a human-readable string of BSON value information
   * If invoked manually without node.js.inspect function, this will default to a modified JSON.stringify
   */
  public abstract inspect(depth?: number, options?: unknown, inspect?: InspectFn): string;

  /** @internal */
  abstract toExtendedJSON(): unknown;
}
